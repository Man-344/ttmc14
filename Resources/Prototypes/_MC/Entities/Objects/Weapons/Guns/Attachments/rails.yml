- type: entity
  parent: [ MCAttachmentBaseRail, MCAttachableToggleableBase ]
  id: MCAttachmentRailFlashlight
  name: rail flashlight
  description: "A simple flashlight used for mounting on a firearm.
    Has no drawbacks, but isn't particuraly useful outside of providing a light source."
  components:
  - type: ItemTogglePointLight
  - type: ToggleableVisuals
    spriteLayer: light
  - type: PointLight
    enabled: false
    radius: 5
    softness: 5
    energy: 1.5
    autoRot: true
    netsync: false
  - type: HandheldLight
    addPrefix: false
    blinkingBehaviourId: blinking
    radiatingBehaviourId: radiating
  - type: NoHandsInteractionBlocked
  - type: LightBehaviour
    behaviours:
    - !type:FadeBehaviour
      id: radiating
      interpolate: Linear
      maxDuration: 2.0
      startValue: 3.0
      endValue: 2.0
      isLooped: true
      property: Radius
      enabled: false
      reverseWhenFinished: true
    - !type:PulseBehaviour
      id: blinking
      interpolate: Nearest
      maxDuration: 1.0
      minValue: 0.1
      maxValue: 2.0
      isLooped: true
      property: Radius
      enabled: false
  - type: Battery
    maxCharge: 10
    startingCharge: 10
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 3
  - type: Sprite
    layers:
    - state: flashlight
    - state: flashlight_on
      shader: unshaded
      visible: false
      map: [ "light" ]
  - type: Item
    sprite: _MC/Objects/Weapons/Guns/Attachments/rail.rsi
  - type: Appearance
  - type: AttachableToggleable
    attachedOnly: true
    useDelay: 1.0
    icon:
      sprite: _MC/Objects/Weapons/Guns/Attachments/rail.rsi
      state: flashlight
    iconActive:
      sprite: _MC/Objects/Weapons/Guns/Attachments/rail.rsi
      state: flashlight_on
    actionName: Toggle Rail Flashlight
    actionDesc: Can be toggled on and off.
  - type: AttachableVisuals
    showActive: true
  - type: AttachableToggleableSimpleActivate
  - type: Tag
    tags:
    - MCAttachmentRail
    - MCAttachmentRailFlashlight
    - Flashlight
  - type: Construction
    graph: RMCFlashLightGraph
    node: RailLight

- type: entity
  parent: MCAttachmentBaseRail
  id: MCAttachmentMagneticHarness
  name: magnetic harness
  description: A magnetically attached harness kit that attaches to the rail mount of a weapon. When dropped, the weapon will sling to a TGMC armor.
  components:
  - type: Sprite
    state: magnetic
  - type: Tag
    tags:
    - MCAttachmentRail
    - MCAttachmentMagneticHarness
  - type: AttachableMagnetic
  - type: AttachableVisuals

- type: entity
  parent: MCAttachmentBaseScope
  id: MCAttachmentT47RailScope
  name: T-47 rail scope
  description: A marine standard mounted zoom sight scope. Allows zoom by activating the attachment.
  components:
  - type: Sprite
    state: marine
  - type: Tag
    tags:
    - MCAttachmentRail
    - MCAttachmentT47RailScope
  - type: AttachableVisuals
  - type: AttachableToggleable
    actionName: Toggle T-47 rail scope
    actionDesc: Allows zoom by activating the attachment.
  - type: AttachableToggleableSimpleActivate
  - type: Scope
    zoomLevels:
    - zoom: 1.3
      offset: 16
      allowMovement: true
      doAfter: 0
  - type: AttachableSpeedMods
    modifiers:
    - conditions:
        wieldedOnly: true
      walk: -0.1
      sprint: -0.1
  - type: AttachableWieldDelayMods
    modifiers:
    - delay: 0.4
  - type: AttachableWeaponRangedMods
    modifiers:
    - conditions:
        wieldedOnly: true
      accuracyAddMult: -0.05

- type: entity
  parent: MCAttachmentBaseScope
  id: MCAttachmentMiniScope
  name: mini rail scope
  description: A small rail mounted zoom sight scope. Allows zoom by activating the attachment.
  components:
  - type: Sprite
    sprite: _MC/Objects/Weapons/Guns/Attachments/rail.rsi
    state: mini
  - type: Tag
    tags:
    - MCAttachmentRail
    - MCAttachmentMiniScope
  - type: AttachableVisuals
  - type: AttachableToggleable
    breakOnMove: false
    icon:
      sprite: _MC/Objects/Weapons/Guns/Attachments/rail.rsi
      state: mini_a
    actionName: Look through the Mini-Scope
    actionDesc: An telescoping eye piece. Fixed at a modest zoom to 5 tiles.
  - type: AttachableToggleableSimpleActivate
  - type: Scope
    zoomLevels:
    - zoom: 1
      offset: 9
      allowMovement: true
      doAfter: 0.2
  - type: AttachableSpeedMods
    modifiers:
    - conditions:
        activeOnly: true
      walk: -0.05
      sprint: -0.05
  - type: AttachableWieldDelayMods
    modifiers:
    - delay: 0.2
  - type: AttachableWeaponRangedMods
    modifiers:
    - conditions:
        unwieldedOnly: true
      accuracyAddMult: -0.05

- type: entity
  parent: MCAttachmentBaseRail
  id: MCAttachmentRedDotSight
  name: red-dot sight
  description: "A red-dot sight for short to medium range. Does not have a zoom feature, but does increase weapon accuracy and fire rate while aiming by a good amount.
    No drawbacks."
  components:
  - type: Sprite
    state: reddot
  - type: Tag
    tags:
    - MCAttachmentRail
    - MCAttachmentRedDotSight
  - type: AttachableVisuals
  - type: AttachableWeaponRangedMods
    modifiers:
    - conditions:
        wieldedOnly: true
      accuracyAddMult: 0.15
    - conditions:
        unwieldedOnly: true
      accuracyAddMult: 0.10

- type: Tag
  id: MCAttachmentRailFlashlight # Фонарик на рельсу

- type: Tag
  id: MCAttachmentMagneticHarness # Магнитная подвеска

- type: Tag
  id: MCAttachmentT47RailScope # Прицел T-47

- type: Tag
  id: MCAttachmentMiniScope # Мини-прицел

- type: Tag
  id: MCAttachmentRedDotSight # Прицел с красной точкой

